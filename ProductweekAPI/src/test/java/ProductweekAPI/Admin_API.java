package ProductweekAPI;import com.aventstack.extentreports.ExtentReports;import com.aventstack.extentreports.ExtentTest;import com.aventstack.extentreports.reporter.ExtentHtmlReporter;import com.opencsv.CSVReader;import io.restassured.RestAssured;import io.restassured.http.ContentType;import io.restassured.response.Response;import org.apache.logging.log4j.Logger;import org.testng.annotations.Test;import java.io.FileReader;import java.io.IOException;import java.util.HashMap;import java.util.Map;import static io.restassured.RestAssured.given;import static org.apache.logging.log4j.LogManager.getLogger;public class Admin_API extends Constants {    //This must be call before every Test   @Test    public void test_get_call() {        RestAssured.useRelaxedHTTPSValidation();       Logger log = getLogger("Loggers");       ExtentHtmlReporter htmlReporter = new ExtentHtmlReporter("Admin_Test_Get_Report.html");       // create ExtentReports and attach reporter(s)       ExtentReports extent = new ExtentReports();       extent.attachReporter(htmlReporter);       // creates a toggle for the given test, adds all log events under it       ExtentTest test = extent.createTest("Admin Test Report", "Checking the content type of the Application");       extent.flush();       log.info("----Loggers-----");        //Using BDD format Passing the Base URL        given().baseUri(Basic_URL).                when().get(Admin_get_url).                then().                //Checking the status code and contenttype for broken api                        statusCode(200).contentType("application/json");    }    @Test    public void add_subCategory_post_call(){        RestAssured.useRelaxedHTTPSValidation();        Logger log = getLogger("Loggers");        ExtentHtmlReporter htmlReporter = new ExtentHtmlReporter("SubCategory_Report.html");        // create ExtentReports and attach reporter(s)        ExtentReports extent = new ExtentReports();        extent.attachReporter(htmlReporter);        // creates a toggle for the given test, adds all log events under it        ExtentTest test = extent.createTest("SubCategory", "Checking the content type of the product list");        extent.flush();        log.info("----Loggers-----");        //Using Exception Handling        try {            CSVReader csv_Reader = new CSVReader(new FileReader(Csv_filepath_Subcategory_filepath), ',');            //intialize array of string            String[] record;            int statusCode = 0;            //logg.info("Reading CSV File");            while ((record = csv_Reader.readNext()) != null) {                Map<String, Object> map = new HashMap<String, Object>();                map.put("productSubCategoryName", record[0]);                map.put("productCategoryName", record[1]);                map.put("imageUrl", record[2]);                //adding authorization in header                Response response = given().headers("Authorization", "Bearer " + bearer_token).                        contentType(ContentType.JSON).                        when().body(map).                        post(Add_subcategory_Url).                        then().extract().response();                statusCode = response.getStatusCode();                //printing  response on console               // System.out.println(response.getBody().asString());            }            System.out.println("The status code recevied: " + statusCode);        }        catch (IOException e) {            e.printStackTrace();        }    }    @Test    public void add_Category_Post_Call()    {        RestAssured.useRelaxedHTTPSValidation();        Logger log = getLogger("Loggers");        ExtentHtmlReporter htmlReporter = new ExtentHtmlReporter("Category_Report.html");        // create ExtentReports and attach reporter(s)        ExtentReports extent = new ExtentReports();        extent.attachReporter(htmlReporter);        // creates a toggle for the given test, adds all log events under it        ExtentTest test = extent.createTest("admin Category", "Checking the Product Category ");        extent.flush();        log.info("----Loggers-----");        //Using Exception Handling        try {            CSVReader csv_Reader = new CSVReader(new FileReader(Csv_category_filepath), ',');            //intialize array of string            String[] record;            int statusCode = 0;            //logg.info("Reading CSV File");            while ((record = csv_Reader.readNext()) != null) {                Map<String, Object> map = new HashMap<String, Object>();                map.put("productCategoryName", record[0]);                map.put("imageurl", record[0]);                //adding authorization in header                Response response = given().headers("Authorization", "Bearer " + bearer_token).                        contentType(ContentType.JSON).                        when().body(map).                        post(Add_category_Url).                        then().extract().response();                statusCode = response.getStatusCode();                //printing  response on console                System.out.println(response.getBody().asString());            }            System.out.println("The status code recieved: " + statusCode);        }        catch (IOException e) {            e.printStackTrace();        }    }}